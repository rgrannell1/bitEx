<!DOCTYPE html>
<html>
<head lang="en" ng-app="coinise">
	<meta charset="UTF-8">
	<meta viewport content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Latest compiled and minified JavaScript -->
	<title>Coinise</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<script src="/resources/js/vendor/lodash.js"></script>
	<script src="/resources/js/vendor/angular.js"></script>
	<script src="/resources/js/vendor/angular-route.js"></script>
	<script src="/resources/js/custom/coiniseControllers.js"></script>
	<script>
	var coinise = angular.module('coinise', ['ngRoute', 'coiniseControllers']);

	coinise.config(['$routeProvider', 
		
		function($routeProvider) {

			$routeProvider.when('/buy', {
				'controller': 'buyController',
				'templateUrl': 'templates/buy.html'
			}).when('/sell', {
				'controller': 'sellController',
				'templateUrl': 'templates/sell.html'
			}).when('/withdraw', {
				'controller': 'withdrawController',
				'templateUrl': 'templates/withdraw.html'
			}).otherwise({
				'redirectTo': '/dashboard'
			})	
		}
	]);
</script>
<style>

	.html {
		font-size: 16px;
	}

	.body {
		font-size: 100%;
		line-height: 1.5em;
	}

	#feature-options li a {
		color: #555555;
	}

	.hideable {
		display: none;
	}

	.hideable.active {
		display: block;
	}

	#feature-body .page-header {
		border-bottom: 2px solid #EEE;
	}

	.stretch {
		min-height: 800px;
	}

	#offers {
		text-align: center;
	}

	.bloat {
		padding: 20px;
		margin-bottom: 10px;
		padding-top: 30px;
		border: 1px solid rgba(0, 0, 0, 0.1);	
	}

	.bloat:after {
		clear: both;	
	}

	
	#my-wallet-body .fa.fa-btc {
		color: #dddd66;
	}

	#my-wallet-body .fa.fa-eur {
		color: #555555;
	}

</style>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
		<div class="container-fluid">
			<a class="navbar-brand" href="/">Coinise</a>

			<div class="collapse navbar-collapse navbar-right" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li><a id="buy-nav" href="#/buy">Buy</a></li>
					<li><a id="sell-nav" href="">Sell</a></li>
					<li><a id="withdraw-nav" href="">Withdraw</a></li>
					<li><a id="sign-out" href="">Sign Out</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<main>
		<section id="my-dashboard">
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-4">
						<div class="bloat">
							<div class="row">
								<div class="col-md-6">
									<ul id="offers" class="list-inline">
										<li id="offer-buy"><b>Buy Price: </b><span class="text-primary"></span></li>
										<li id="offer-sell"><b>Sell Price: </b><span class="text-primary"></span></li>
									</ul>
								</div>
								<div class="col-md-6">
									<ul id="balance" class="list-inline">
										<li id="btc-bal">
											<span>
												<i class="fa fa-btc"></i>
												BTC Balance <span class="badge">xxx</span>
											</span>
										</li>
										<li id="eur-bal">
											<span>
												<i class="fa fa-eur"></i>
												Eur Balance <span class="badge">xxx</span>
											</span>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<script>

						$(document).ready(function() {

							var getBitStatus = function(callback) {

								$.get('https://api.bitcoinaverage.com/ticker/EUR/', function (data) {

									console.log(data);

									var offers = $('#my-dashboard').find('#offers');

									$(offers).find('#offer-buy').find('span').text(data.bid)
									$(offers).find('#offer-sell').find('span').text(data.ask)

									$('title').text('(' + data.bid + ' EUR)')

									callback();

								})
							}

							getBitStatus( function poll() {

									
									setTimeout(function() {

										getBitStatus(poll)

									}, 10000)
							})
							
						
						});
					</script>
				</div>
			</div>
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="panel panel-default stretch">
							<div class="panel-body">
								<header>
									<div class="page-header">
										<h1>
											Dashboard
										</h1>
									</div>
								</header>
									<div class="row">
										<div class="col-md-3">
											<aside>
												<nav id="feature-options">
													<div class="list-group">
														<a id="buy" href="#" class="list-group-item">
															<i class="fa fa-shopping-cart fa-fw"></i>
															 Buy Bitcoin
															</a>
														</a>
														<a id="sell" href="#" class="list-group-item">
															<i class="fa fa-tag fa-fw"></i>
															Sell Bitcoin
															</a>
														</a>
														<a id="withdraw" href="#" class="list-group-item">
															<i class="fa fa-mail-reply fa-fw"></i>
															 Withdraw
														</a>
													</ul>
												</nav>
											</aside>
										</div>
										<div class="col-md-9">
											<div id="feature-body">
												<div id="my-eurwallet-body" class="hideable">
													<header>
														<div class="page-header">
															<h1>Euro Wallet
															<small>Your Euro Wallet</small>
															</h1>
														</div>
													</header>
													<div class="row">
														<div class="col-md-8 col-md-offset-2">
														</div>
													</div>
												</div>
												<div id="buy-body" class="hideable">
													<header>
														<div class="page-header">
															<h1>Buy Bitcoin
															<small>Euro into Bitcoin</small>
															</h1>
														</div>
													</header>
													<div class="row">
														<div class="col-md-6">
															<form role="form" method="post">
																<div class="form-group">
																	<label for="amount">Amount (EUR) </label>
																	<input type="text" class="form-control" name="amount" placeholder="0.000">
																</div>
																<div class="panel panel-default">
																	<div class="panel-body">
																		<div class="row">
																			<div class="col-md-8 col-md-offset-2">
																				<div class="row">
																					<div class="col-xs-4">
																						Subtotal: 
																					</div>
																					<div class="col-xs-6 col-xs-offset-2">
																						0.000000 BTC
																					</div>
																				</div>
																				<div class="row">
																					<div class="col-xs-4">
																						Fee: 
																					</div>
																					<div class="col-xs-6 col-xs-offset-2">
																						0.8 %
																					</div>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-4 col-md-offset-8">
																		<button type="submit"class="btn btn-success">Buy Bitcoin</button>
																	</div>
																</div>
															</form>
														</div>
													</div>
												</div>
												<div id="sell-body" class="hideable">
													<header>
														<div class="page-header">
															<h1>Sell Bitcoin
															<small>Bitcoin into Euro</small> 
															</h1>
														</div>
													</header>
													<div class="row">
														<div class="col-md-6">
															<form role="form" method="post">
																<div class="form-group">
																	<label for="amount">Amount (BTC) </label>
																	<input type="text" class="form-control" name="amount" placeholder="0.000">
																</div>
																<div class="panel panel-default">
																	<div class="panel-body">
																		<div class="row">
																			<div class="col-md-8 col-md-offset-2">
																				<div class="row">
																					<div class="col-xs-4">
																						Subtotal: 
																					</div>
																					<div class="col-xs-6 col-xs-offset-2">
																						0.000000 EUR
																					</div>
																				</div>
																				<div class="row">
																					<div class="col-xs-4">
																						Fee: 
																					</div>
																					<div class="col-xs-6 col-xs-offset-2">
																						0.8 %
																					</div>
																				</div>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-4 col-md-offset-8">
																		<button type="submit"class="btn btn-success">Buy Bitcoin</button>
																	</div>
																</div>
															</form>
														</div>
													</div>
												</div>
												<div id="withdraw-body" class="hideable">
													<header>
														<div class="page-header">
															<h1>Withdraw
																<small>To your Bitcoin wallet</small>
															</h1>
														</div>
													</header>
													<div class="row">
														<div class="col-md-8 col-md-offset-2">
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
		</section>
	</main>
	<script>

		'use strict';

		$('#feature-options').find('li').click(function(event) {
			
			event.preventDefault();

			var id = $(this).attr('id')

			console.log(id)

			var featureBody = $('#feature-body')

			$(featureBody).find('div.active').removeClass('active')
			$(featureBody).find('#' + id + '-body').addClass('active')

			$(this).addClass('active')
		})
	</script>
</body>
</html>
